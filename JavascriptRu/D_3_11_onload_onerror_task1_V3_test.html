<!DOCTYPE HTML>
<html>

<head>
  <meta charset="utf-8">
  <style>
    .img-replace {
      float: left;
      border: 1px solid black;
    }
  </style>
</head>

<body>

  <!-- Google -->

  <div style="width:114px;height:40px;font-size:32px;letter-spacing:3px" class="img-replace" data-src="https://js.cx/search/google.png">
    <span style="color:#1A53F7">G</span><span style="color:#E42131">o</span><span style="color:#FEB819">o</span><span style="color:#164AF2">g</span><span style="color:#00a315">l</span><span style="color:#E42131">e</span>
  </div>

  <!-- Яндекс -->
  <div style="width:101px;height:40px;font-size:32px" class="img-replace" data-src="https://js.cx/search/yandex.png">
    <span style="color:#F00">Я</span>ндекс
  </div>

  <!-- Bing -->
  <div style="width:100;height:40px;font-size:32px;color:#006dd4;font-weight:bold;letter-spacing: 3px; font-family:Arial" class="img-replace" data-src="https://js.cx/search/bing.png">bing</div>

  <hr>
  <!-- картинки (для bing картинки специально нет, чтобы протестировать случай "загрузка не удалась") -->

<!--
  <img src="https://js.cx/search/yandex.png" width="114" height="40" alt="Яндекс">
  <img src="https://js.cx/search/google.png" width="101" height="40" alt="Google">
  <img src="https://js.cx/search/bing.png" width="101" height="40" alt="Файла нет (bing)">
-->


  <script>
//    Красивый "ALT"
//    важность: 5
//
//    Обычно, до того как изображение загрузится (или при отключенных картинках), посетитель видит пустое место с текстом из «ALT». Но этот атрибут не допускает HTML-форматирования.
//
//    При мобильном доступе скорость небольшая, и хочется, чтобы посетитель сразу видел красивый текст.
//
//    Реализуйте «красивый» (HTML) аналог alt при помощи CSS/JavaScript, который затем будет заменён картинкой сразу же как только она загрузится. А если загрузка не состоится – то не заменён.
//
//    Демо: (нажмите «перезагрузить», чтобы увидеть процесс загрузки и замены)
//
//    Картинки для bing специально нет, так что текст остается «как есть».
//
//    Исходный документ содержит разметку текста и ссылки на изображения.
    "use strict";
    
//    var imgDivs = document.querySelectorAll('.img-replace');
    var imgDivs = document.getElementsByTagName('div');
    console.log(imgDivs);
    
    for (var i = 0; i < imgDivs.length; i++) {
      (function () { //создаём замыкание в анонимной самовызываемой ф-ции
        var div = imgDivs[i];
//      console.log(div.dataset.src);
        var src = div.dataset.src;
        var img = document.createElement('img');
        img.src = src;
        img.onload = function() {
          console.log(this);
          console.log('Загружена');
          console.log(this.src);
          div.innerHTML = "";
          div.appendChild(this);
        }
      })();
    }
  </script>
</body>

</html>