<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
</head>
<body>
	<script>

//		Будем идти по массиву и накапливать в некоторой переменной s текущую частичную сумму. Если в какой-то момент s окажется отрицательной, то мы просто присвоим s=0. Утверждается, что максимум из всех значений переменной s, случившихся за время работы, и будет ответом на задачу.
//
//		Докажем этот алгоритм.
//
//		В самом деле, рассмотрим первый момент времени, когда сумма s стала отрицательной. Это означает, что, стартовав с нулевой частичной суммы, мы в итоге пришли к отрицательной частичной сумме – значит, и весь этот префикс массива, равно как и любой его суффикс имеют отрицательную сумму.
//
//		Следовательно, от всего этого префикса массива в дальнейшем не может быть никакой пользы: он может дать только отрицательную прибавку к ответу.
		
		function getMaxSubSum(arr) {
			var maxSum = 0,
			partialSum = 0;
			
			for (var i = 0; i < arr.length; i++) {
				partialSum += arr[i];
				maxSum = Math.max(maxSum, partialSum);
				if (partialSum < 0) partialSum = 0;
			}
			
			console.log(maxSum);
		}
		
		
		
		getMaxSubSum([-1, 2, 3, -9]);	// = 5 (сумма выделенных)
		getMaxSubSum([2, -1, 2, 3, -9]);	// = 6
		getMaxSubSum([-1, 2, 3, -9, 11]);	// = 11
		getMaxSubSum([-2, -1, 1, 2]);	// = 3
		getMaxSubSum([100, -9, 2, -3, 5]);	// = 100
		getMaxSubSum([1, 2, 3]);	// = 6 (неотрицательные - берем всех)


		getMaxSubSum([-1, -2, -3]);	// = 0
	</script>
</body>
</html>