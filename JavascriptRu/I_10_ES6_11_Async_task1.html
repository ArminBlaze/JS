<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
</head>
<body>
	<script>
//		Rewrite using async/await
//
//		Rewrite the one of examples from the chapter Promises chaining using async/await instead of .then/catch:
//
//		function loadJson(url) {
//			return fetch(url)
//				.then(response => {
//					if (response.status == 200) {
//						return response.json();
//					} else {
//						throw new Error(response.status);
//					}
//				})
//		}
//
//		loadJson('no-such-user.json') // (3)
//			.catch(alert); // Error: 404
		
		
		async function loadJson(url) {
			try {
				let response = await fetch(url);
				
				if (response.status == 200) {
					let user = await response.json();
					return user;
				} else {
					throw new Error(response.status);
				}
			}
			catch(err) {
				alert(err);
			}
		}

		loadJson('no-such-user.json') // (3)
	</script>
</body>
</html>